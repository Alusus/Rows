import "Create";
import "DbConBuilder";
def j: Integer;
def c: FieldConstraints;
j.fieldConstraints.setNotNullConstraint();
j.fieldConstraints.setUniqueConstraint();
def par: String;
par = "10";

def j2: VarChar(90);
def c2: FieldConstraints;
j2.fieldConstraints.setNotNullConstraint();
j2.fieldConstraints.setUniqueConstraint();
par = "'me'";
j2.fieldConstraints.setDefaultConstraint(par);
def j3: Integer;
def c3: FieldConstraints;
j3.fieldConstraints.setNotNullConstraint();
j3.fieldConstraints.setUniqueConstraint();

def t: TableConstraints;
def pk: Array[String];
par = "j";
pk.add(par);
par = "j2";
def par2: String = "Cars";
def par3: String = "Name";
t.addForgenKey(par, par2, par3);
par = "j3";
par2 = "Cars";
par3 = "Id";
t.addForgenKey(par, par2, par3);
t.setPrimaryKeyConstraint(pk);
def table: Create;
par = "types";
table.setTableName(par);
table.setNotExistFlag();
def data: Array[ptr[Data]];
par = "j";
par2 = "j2";
par3 = "j3";
data.add(j~ptr);
table.setDataType(j~ptr);
table.setColumnNames(par);
table.addToColsString();
data.add(j2~ptr);
table.setDataType(j2~ptr);
table.setColumnNames(par2);
table.addToColsString();
data.add(j3~ptr);
table.setColumnNames(par3);
table.setDataType(j3~ptr);
table.addToColsString();
table.setTConst(t~ptr);
table.setTConstString();
table.generateExecString();
def ex: String;
ex = table.getExecString();
Console.print(ex);
Console.print("\n");
def DbCon: DbConBuilder;
DbCon.setDBName(String("testdb"));
DbCon.setUserName(String("usedr12"));
DbCon.setPassword(String("Qwerty231@#!"));
DbCon.setServer(String("localhost"));

def mysql: MySql.Db;
mysql = DbCon.mySqlConBuilder();
table.setMysqlObj(mysql);
table.exec();

